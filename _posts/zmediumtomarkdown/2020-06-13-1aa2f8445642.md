---
title: 現實使用 Codable 上遇到的 Decode 問題場景總匯
author: ZhgChgLi
date: 2020-06-13T16:33:58.105+0000
last_modified_at: 2022-06-11T06:17:08.756+0000
categories: ZRealm Dev.
tags: [ios,ios-app-development,codable,json,decode]
description: 從基礎到進階，深入使用 Decodable 滿足所有可能會遇到的問題場景
image:
  path: assets/1aa2f8445642/1*9VYP3_Mhj9xsLKbgCwt6XQ.jpeg
render_with_liquid: false
---

### 現實使用 Codable 上遇到的 Decode 問題場景總匯\(上\)

從基礎到進階，深入使用 Decodable 滿足所有可能會遇到的問題場景


![Photo by [Gustas Brazaitis](https://unsplash.com/@gustasbrazaitis){:target="_blank"}](/assets/1aa2f8445642/1*9VYP3_Mhj9xsLKbgCwt6XQ.jpeg)

Photo by [Gustas Brazaitis](https://unsplash.com/@gustasbrazaitis){:target="_blank"}
### 前言

因應後端 API 升級需要調整 API 處理架構，近期趁這個機會一併將原本使用 Objective\-C 撰寫的網路處理架構更新成 Swift；因語言不同，也不在適合使用原本的 [Restkit](https://github.com/RestKit/RestKit){:target="_blank"} 幫我們處理網路層應用，但不得不說 Restkit 的功能包山包海非常強大，在專案中也用得活靈活現，基本沒有太大的問題；但相對的非常笨重、幾乎已不再維護、純 Objective\-C；未來勢必也要更換的。

Restkit 幾乎幫我們處理完所有網路請求相關會需要到的功能，從基本的網路處理、API 呼叫、網路處理，到 Response 處理 JSON String to Object 甚至是 Object 存入 Core Data 它都能一起處理實打實的一個 Framework 打十個。

隨著時代的演進，目前的 Framework 已不在主打一個包全部，更多的是靈活、輕巧、組合，增加更多彈性創造更多變化；因此再替換成 Swift 語言的同時，我們選擇使用 Moya 作為網路處理部分的套件，其他我們需要的功能再選擇其他方式進行組合。
### 正題

關於 JSON String to Object Mapping 部分，我們使用 Swift 自帶的 Codable \(Decodable\) 協議 & JSONDecoder 進行處理；並拆分 Entity/Model 加強權責區分、操作及閱讀性、另外 Code Base 混 Objective\-C 和 Swift 也要考量進去。


> _＊ Encodable 的部份省略、範例均只展示實作 Decodable，大同小異，可以 Decode 基本也能 Encode。_ 




### 開始

假設我們初始的 API Response JSON String 如下:
