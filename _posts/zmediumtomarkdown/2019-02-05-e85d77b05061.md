---
title: 動手做一支 Apple Watch App 吧！
author: ZhgChgLi
date: 2019-02-05T16:23:30.749+0000
last_modified_at: 2021-02-24T01:32:21.467+0000
categories: ZRealm Dev.
tags: [ios,watchos,apple-watch-apps,watchkit,ios-app-development]
description: watchOS 5 手把手開發Apple Watch App 從無到有
image:
  path: assets/e85d77b05061/1*aNqsa7aR3Vi3NIIvaUFZLA.png
render_with_liquid: false
---

### 動手做一支 Apple Watch App 吧！\(Swift\)

watchOS 5 手把手開發Apple Watch App 從無到有
#### [\[最新\] Apple Watch Series 6 開箱＆使用兩年體驗心得 >>>點我前往](../eab0e984043/)
### 前言:

暨上一篇 [Apple Watch 入手開箱文](../a2920e33e73e/) 後已經過了快三個月，最近終於找到機會研究開發Apple Watch App啦。


![[結婚吧 — 最大婚禮籌備App](https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E4%B8%8D%E6%89%BE%E6%9C%80%E8%B2%B4-%E5%8F%AA%E6%89%BE%E6%9C%80%E5%B0%8D/id1356057329#?platform=appleWatch){:target="_blank"}](/assets/e85d77b05061/1*aNqsa7aR3Vi3NIIvaUFZLA.png)

[結婚吧 — 最大婚禮籌備App](https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E4%B8%8D%E6%89%BE%E6%9C%80%E8%B2%B4-%E5%8F%AA%E6%89%BE%E6%9C%80%E5%B0%8D/id1356057329#?platform=appleWatch){:target="_blank"}

補一下使用三個月後的心得：
1\. e\-sim\(LTE\)依然還想不到什麼時候會用到，所以也還沒申請沒用過
2\.常用功能：靠近解鎖Mac電腦、舉手查看通知、Apple Pay
3\.健康提醒：過了三個月已開始懶了，通知提醒都看看，沒達成圓圈也無感
4\.第三方App支援度依然很差
5\.錶面可依照心情任意更換增加新鮮感
6\.更詳細的運動紀錄：例如走遠一點路去買晚餐，手錶會自動偵測詢問是否要記錄運動

使用三個月後整體來說，還是如原開箱文所寫就像是多個生活小助手，幫你解決瑣碎的事．
### 第三方App支援度依然很差

在我實際開發過Apple Watch App之前還很納悶，為何Apple Watch上的App都很陽春甚至就只是「堪用」罷了，包括LINE\(訊息不同步而且從未更新\)、Messenger\(就是堪用\)；直到我實際開發過Apple Watch App之後才知道這些開發者的苦衷…\.
### 首先，了解Apple Watch App的定位，化繁為簡

Apple Watch的定位 **「不是取代iPhone，而是輔助」** 不論是官方介紹、官方App、watchOS API都是這個走向；所以才會覺得第三方APP很陽春、功能很少\(抱歉，我太貪心了Orz\)

以 [我們的A](https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E6%9C%80%E5%A4%A7%E5%A9%9A%E7%A6%AE%E7%B1%8C%E5%82%99app/id1356057329?mt=8){:target="_blank"} pp為例，有搜尋商家、查看專欄、討論區、線上詢問…等等功能；線上詢問就是有價值搬上Apple Watch的項目，因為他需要即時性而且更快速的回覆代表更有機會獲得訂單；搜尋商家、查看專欄、討論區這些功能相對複雜，在手錶上就算做的到也意義不大\(螢幕能呈現的資訊太少、也不需要即時性\)

核心概念還是「以輔助為主」，所以並不是什麼功能都需要搬上Apple Watch；畢竟使用者很少很少時間會是只有戴手錶沒帶手機，而遇到這種情況時，使用者的需求也只有重要的功能\(像查看專欄文章這種沒有重要到一定要立刻馬上用手錶看\)
### 讓我們開始吧！


> **_這也是我第一次開發Apple Watch App，文章內容可能不夠深入，敬請大家指教！！_** 
 

> **_本篇只適合有開發過iOS App/UIKit基礎的讀者閱讀_** 
 

> **_本篇使用：iOS ≥ 9、watchOS ≥ 5_** 




#### 為iOS專案新建 watchOS Target:


![File \-> New \-> Target \-> watchOS \-> WatchKit App](/assets/e85d77b05061/1*yxwki7mCbfJbEfsTDM683A.png)

File \-> New \-> Target \-> watchOS \-> WatchKit App

_\*Apple Watch App無法獨立安裝，一定要依附在 iOS App 之下_

新建好之後目錄會長這樣：


![](/assets/e85d77b05061/1*WIjSrYl5Hch0mGIjlNbyFQ.png)


你會發現有兩個Target項目，缺一不可：
1. WatchKit App: 負責存放資源、UI顯示
/Interface\.storyboard：同 iOS，裡面有系統預設建立的視圖控制器
/Assets\.xcassets：同 iOS，存放用到的資源項目
/info\.plist：同 iOS，WatchKit App 相關設定
2. WatchKit Extension: 負責程式呼叫、邏輯處理\( \* \.swift\)
/InterfaceController\.swift：預設的視圖控制器程式
/ExtensionDelegate\.swift：類似Swift的AppDelegate，Apple Watch App 啟動入口
/NotificationController\.swift：用於處理Apple Watch App上的推播顯示
/Assets\.xcassets：這裡不使用，我統一放在WatchKit App的Assets\.xcassets下
/info\.plist：同 iOS，WatchKit Extension 相關設定
/PushNotificationPayload\.apns：推播資料，可用在模擬器上測試推播功能


細節會在後面做介紹，先大概了解一下目錄及文件內容功能即可。
#### 視圖控制器：

**在AppleWatch中視圖控制器不叫ViewController而是InterfaceController** ，你可以在WatchKit App/Interface\.storyboard中找到Interface Controller Scence，控制它的程式就放在WatchKit Extension/InterfaceController\.swift中\(同iOS概念\)


![Scene預設會和Notification Controller Scene擠在一起 \(我會把它拉上面一點分開\)](/assets/e85d77b05061/1*2ibd9b4yaRGxwSpgKMdyUw.png)

Scene預設會和Notification Controller Scene擠在一起 \(我會把它拉上面一點分開\)

可在右方設定InterfaceController的標題顯示文字．

標題顏色部分吃的是Interface Builder Document/Global hint設定，整個App的風格顏色會是統一的．


![](/assets/e85d77b05061/1*ZcS9q4gNSBo6MZLp1eITeA.jpeg)

#### 元件庫：


![沒有太多複雜的元件，元件功能也都簡單明瞭](/assets/e85d77b05061/1*Armv40CxLqJ1wlbMI_o1oQ.png)

沒有太多複雜的元件，元件功能也都簡單明瞭
#### UI 排版：

萬丈高樓從View起，排版的部分沒有 UIKit\(iOS\) 中的Auto Layout、約束、圖層，全都使用參數進行排版設置，更簡單有力\(排起來有點像 UIKit 中的 UIStackView\)


> **一切排版由Group組成，類似UIKit中的 UIStackView 但能設置更多排版參數** 






![Group的參數設置](/assets/e85d77b05061/1*aoHxAFjEGgH3ZLQx9GhH_Q.png)

Group的參數設置
1. Layout：設置被包在裡面的子View排版方式（水平、垂直、圖層堆疊）
2. Insets：設置Group的上下左右間距
3. Spacing：設置被包在裡面的子View之間的間距
4. Radius：設置Group的圓角，沒錯！WatchKit自帶圓角設置參數
5. Alignment/Horizontal：設置水平對齊方式（左、中、右）與鄰居、外層包覆的View設置會有所連動
6. Alignment/Vertical：設置垂直對齊方式（上、中、下）與鄰居、外層包覆的View設置會有所連動
7. Size/Width：設置Group的大小，有三種模式可選「Fixed：指定寬度」、「Size To Fit Content：依照內容子View大小決定寬度」、「Relative to Container：參照外層包覆的View大小為寬度\(可設%/\+ \-修正值\)」
8. Size/Height：同Size/Width，此項是設置高度

#### 字型/字體大小設置：


![](/assets/e85d77b05061/1*8NfJeD4FsUw-SpAx_VFDCQ.png)


可直接套用系統的Text Styles，或使用Custom（但這邊我測試使用Custom無法設定字體大小）；所以 **我是使用System** 自訂各顯示Label的字體大小
#### **做中學：以Line排版為例**


![](/assets/e85d77b05061/1*oY9kLcnASy9j1WXxV4FGPA.png)


排版部分不像 iOS 那麼複雜，所以我直接透過範例示範給大家看，就能直接上手；以 Line 的主頁排版為例子：

_在WatchKit App/Interface\.storyboard中找到Interface Controller Scence:_

1\.整個頁面，相當於 iOS App 開發中會使用到的 UITableView，在Apple Watch App 中簡化了操作，名字也改叫做「WKInterfaceTable」
首先就先拉一個Table到Interface Controller Scence中


![](/assets/e85d77b05061/1*bui2UXp9QwBYSYC-mwyK6g.png)


同UIKit UITableView，有Table本體、有Cell\(Apple Watch中叫做Row\)；使用起來簡化許多， **你可以直接在此介面上進行Cell的設計排版！**

2\. 分析排版架構，設計Row顯示樣式：


![](/assets/e85d77b05061/1*2bsyQ9Szfptugtg_KKxcgg.png)


要排出一個左邊有圓角滿版的Image且堆疊一個Label，右邊平均分配上下兩個區塊，上方放Label，下方也放Label的區塊

2–1: 拉出左右兩區塊的架構


![](/assets/e85d77b05061/1*ez1NpEq3fgAMEqNjwTvWdw.png)


拉兩個Group到Group中，並對Size參數分別設定：

左邊綠色部分：


![Layout設定Overlap，裡面子View要做未讀訊息Label的圖層堆疊顯示](/assets/e85d77b05061/1*axrBV1EHrPtOHvTnLtB79w.png)

Layout設定Overlap，裡面子View要做未讀訊息Label的圖層堆疊顯示


![設固定長寬40的正方形](/assets/e85d77b05061/1*Ti346bLg8AM2FInO6PNwLw.png)

設固定長寬40的正方形

右邊紅色部分：


![Layout設定Vertical，裡面子View要做上下兩個顯示](/assets/e85d77b05061/1*5aq_TTFEp3kq6RusiTkYcw.png)

Layout設定Vertical，裡面子View要做上下兩個顯示


![寬度設定參照外層，比例100%，扣掉左邊綠色部分40](/assets/e85d77b05061/1*aXH2d1kDRLNl4XsizV9P_g.png)

寬度設定參照外層，比例100%，扣掉左邊綠色部分40

左右容器內排版：


![](/assets/e85d77b05061/1*NR2vAZ3mqPMjCLqBCJ6ZxQ.png)


左邊部分：拉入一個Image，再拉入一個包覆Lable的Group對齊設右下\(Group設底色再設間距及圓角\)

右邊部分：拉入兩個Label，一個對齊設左上，一個對齊設左下即可
#### 為Row命名\(同UIKit UITableView為Cell設定identifier\)：


![選定Row\->Identifier\->輸入自訂名稱](/assets/e85d77b05061/1*VTCVIJRAG-sGdBLjC26TKg.png)

選定Row\->Identifier\->輸入自訂名稱
#### Row的呈現樣式不只一種呢？

非常簡單，只要在拉一個Row放在Table裡\(實際要顯示哪個樣式的ROW由程式控制\)並輸入Identifier命名即可


![這邊我再拉一個Row用於呈現無資料時的提示](/assets/e85d77b05061/1*kQOKjxqmtI7M8BwYQ0yY0A.png)

這邊我再拉一個Row用於呈現無資料時的提示
#### 排版相關資訊

watchKit的hidden不會佔位，可拿來做交互應用（有登入才顯示Table；沒登入顯示提示Label）


![](/assets/e85d77b05061/1*RiCY7mH4_MyocNPN1GDuvA.png)


排版到此告一段落，可依照個人設計做修改；上手容易，多排個幾次、玩玩對齊參數，就能熟悉！
#### 程式控制部分：

接續Row，我們需要建立一個Class對Row進行參照操作：
