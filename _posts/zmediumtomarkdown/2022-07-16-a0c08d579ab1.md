---
title: 無痛轉移 Medium 到自架網站
author: ZhgChgLi
date: 2022-07-16T16:00:47.481+0000
last_modified_at: 2022-08-11T14:24:02.839+0000
categories: ZRealm Dev.
tags: [ios-app-development,jekyll,github-actions,medium,self-hosted]
description: 將 Medium 內容搬遷至 Github Pages (with Jekyll/Chirpy)
image:
  path: assets/a0c08d579ab1/1*XsLBwUYruBOgUy3snkhoxw.png
render_with_liquid: false
---

### 無痛轉移 Medium 到自架網站

將 Medium 內容搬遷至 Github Pages \(with Jekyll/Chirpy\)


![[zhgchg\.li](http://zhgchg.li){:target="_blank"}](/assets/a0c08d579ab1/1*XsLBwUYruBOgUy3snkhoxw.png)

[zhgchg\.li](http://zhgchg.li){:target="_blank"}
### 背景

經營 Medium 的第四年，已累積超過 65 篇文章，將近 1000\+ 小時的時間心血；當初會選擇 Medium 的原因是簡單方便，可以很好的把心思放在撰寫文章上，不需要去管其他的事；在此之前曾經嘗試過自架 Wordpress，但都把心思放在弄環境、樣式、Plguin 這些事情上，感覺怎麼調整都不滿意，調整好後又發現載入太慢、閱讀體驗不佳、後台撰寫文章介面也不夠人性化，然後就沒怎麼在更新了。

隨著在 Medium 撰寫的文章越來越多、累積了一些流量與追蹤者後，又開始想自己掌握著這些成果，而不是被第三方平台掌控 \(e\.g Medium 關站心血全沒\)，所以從前年開始就一直在尋覓第二備份網站，會持續經營 Medium 但也會同步把內容發佈到自己能掌控的網站上；當時找到的解決方案是 — [Google Site](../724a7fb9a364/) 但老實說只能當成個人「入口網站」使用，文章撰寫界面功能有限，無法真的把所有文章心血搬過去。

最終還是走回自架的的道路，不同的是採用的並非動態網站\(e\.g\. wordpress\)，而是靜態網站；相較之下能支援的功能較少，但是我要的就是文章撰寫功能跟簡潔流暢可客製化的瀏覽體驗，其他都不需要！

靜態網站的工作流程是：在本地使用 Markdown 格式撰寫好文章，然後將其透過靜態網站引擎轉換為 靜態網頁 上傳到伺服器，即完成；靜態網頁，瀏覽體驗快速！

使用 Markdown 格式寫作，可以讓文章兼容更多不同平台；如不習慣，也可以找線上或線下的 Markdown 撰寫工具，體驗就跟直接在 Medium 撰寫一樣！。

綜合以上，這個方案可以達成我希望流暢的瀏覽體驗及方便的撰寫界面兩個維度的需求。
### 成果


![[zhgchg\.li](http://zhgchg.li){:target="_blank"}](/assets/a0c08d579ab1/1*8yvr8SHvKxScqbu_3Lv7HA.gif)

[zhgchg\.li](http://zhgchg.li){:target="_blank"}
- 支援客製化顯示樣式
- 支援客製化頁面調整 \(e\.g\. 插入廣告、js widget\)
- 支援自訂頁面
- 支援自訂域名
- 靜態化頁面載入快速、瀏覽體驗佳
- 使用 Git 版本控制，文章所有的歷史版本都能保留恢復
- 全自動定時自動同步 Medium 文章到網站

### 環境及工具
- **環境語言** ：Ruby
- **依賴管理工具** ： [RubyGems\.org](https://rubygems.org/){:target="_blank"} 、 [Bundler](https://rubygems.org/gems/bundler){:target="_blank"}
- **靜態網站引擎** ： [Jekyll](https://jekyllrb.com/){:target="_blank"} \(Based on Ruby\)
- **文章格式** ：Markdown
- **伺服器** ： [Github Page](https://docs.github.com/en/pages){:target="_blank"} \(免費、無限流量/容量 靜態網站伺服器\)
- **CI/CD** ： [Github Action](https://github.com/features/actions){:target="_blank"} \(免費 2,000 mins\+/月\)
- **Medium 文章轉換 Markdown 工具** ： [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"} \(Based on Ruby\)
- **版本控制** ： [Git](https://git-scm.com/){:target="_blank"}
- **\(可選\) Git GUI** ： [Git Fork](https://git-fork.com/){:target="_blank"}
- **\(可選\) 網域服務** ： [Namecheap](https://namecheap.pxf.io/P0jdZQ){:target="_blank"}

### 安裝 Ruby

這邊只以我的環境為例，其他作業系統版本請 [Google 如何安裝 Ruby](https://jekyllrb.com/docs/installation/){:target="_blank"} 。
- macOS Monterey 12\.1
- rbenv
- ruby 2\.6\.5

#### 安裝 [Brew](https://brew.sh/index_zh-tw){:target="_blank"}
```
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

在 Terminal 輸入以上指令安裝 Brew。
#### 安裝 [rbenv](https://github.com/rbenv/rbenv){:target="_blank"}
```
brew install rbenv ruby-build
```

MacOS 雖自帶 Ruby 但建議使用 rbenv 安裝另一個 Ruby 與系統自帶的區隔開來，在 Terminal 輸入以上指令安裝 rbenv。
```
rbenv init
```

在 Terminal 輸入以上指令初始化 rbenv
- **關閉＆重新打開 Terminal。**


在 Terminal 輸入 `rbenv` 檢查是否安裝成功！


![](/assets/a0c08d579ab1/1*uVcwZLxSUZymjxILlXyNcw.png)


**成功！**
#### 使用 rbenv 安裝 Ruby
```
rbenv install 2.6.5
```

在 Terminal 輸入以上指令安裝 Ruby 2\.6\.5 版本。
```
rbenv global 2.6.5
```

在 Terminal 輸入以上指令將 Terminal 所使用的 Ruby 版本從系統自帶的切換到 rbenv 的版本。

在 Terminal 輸入 `rbenv versions` 查看當前設定：


![](/assets/a0c08d579ab1/1*AJXLDusJQ7XJQjWHQOqWGA.png)


在 Terminal 輸入 `ruby -v` 查看當前 Ruby、 `gem -v` 查看當前 RubyGems 狀況：


![](/assets/a0c08d579ab1/1*ANyW3uysaKSiySTDGi28gw.png)



> \*Ruby 安裝完後理應也安裝好 [RubyGems](https://github.com/rubygems/rubygems){:target="_blank"} 了。 





**成功！**
#### 安裝 Jekyll & Bundler & ZMediumToMarkdown
```
gem install jekyll bundler ZMediumToMarkdown
```

在 Terminal 輸入以上指令安裝 Jekyll & Bundler & ZMediumToMarkdown。

**完成！**
### 從模版建立 Jekyll Blog

預設的 Jekyll Blog 樣式非常簡潔，我們可以從以下網站找到自己喜歡的樣式並套用：
- [GitHub\.com \#jekyll\-theme repos](https://github.com/topics/jekyll-theme){:target="_blank"}
- [jamstackthemes\.dev](https://jamstackthemes.dev/ssg/jekyll/){:target="_blank"}
- [jekyllthemes\.org](http://jekyllthemes.org/){:target="_blank"}
- [jekyllthemes\.io](https://jekyllthemes.io/){:target="_blank"}
- [jekyll\-themes\.com](https://jekyll-themes.com/){:target="_blank"}


安裝方式一般使用 [gem\-based themes](https://jekyllrb.com/docs/themes/#installing-a-theme){:target="_blank"} ，也有的 Repo 提供 Fork 方式安裝；甚至是提供直接一鍵安裝方式；總之每個模板的安裝方式可能有所不同，請參閱模板的教學使用。


> 另外要注意，因我們要部署到 Github Pages 上，依據官方文件所說並非所有模板都能適用。 




### Chirpy 模版

這邊就以我 Blog 採用的模版 [Chirpy](https://github.com/cotes2020/jekyll-theme-chirpy/){:target="_blank"} 為示範，此模版提供最傻瓜的一鍵安裝方式，可以直接使用。


> 其他模版比較少有提供類似的一鍵安裝，在不熟悉 Jeklly、Github Pages 的情況下先使用此模版是比較好入門的方式；日後有機會再更新文章講其他的模版安裝方式。 





> 另外在 Github 上找可以直接 Fork 的模版也可以\(e\.g\. [al\-folio](https://github.com/alshedivat/al-folio){:target="_blank"} \)直接使用，如果都不是，是需要自己手動安裝的模版就要自行研究如何設定 Github Pages 部署，這邊我稍微研究了一下沒成功，待日後有結果再回來文章補充分享。 




#### 從 Git Template 建立 Git Repo


![](/assets/a0c08d579ab1/1*XRaln4SJiK-la32HhSYPug.png)


[https://github\.com/cotes2020/chirpy\-starter/generate](https://github.com/cotes2020/chirpy-starter/generate){:target="_blank"}
- Repository name： `Github帳號/組織名稱.github.io` \( **務必使用這個格式** \)
- 務必選擇「Public」公開 Repo


點擊「Create repository from template」

完成 Repo 建立。
#### Git Clone 專案


![](/assets/a0c08d579ab1/1*cQUPBm6tzyceXV-iwY5rzw.png)

```
git clone git@github.com:zhgchgli0718/zhgchgli0718.github.io.git
```

git clone 剛剛建立的 Repo。

執行 `bundle` 安裝依賴：


![](/assets/a0c08d579ab1/1*4ebE2NABGtRbKvc75e6aLA.png)


執行 `bundle lock — add-platform x86_64-linux` 鎖定版本


![](/assets/a0c08d579ab1/1*Xvp8WBvKYU59fBVlEne14w.png)

#### 修改網站設定

打開 `_config.yml` 設定檔案進行設定：
