---
title: Xcode 直接使用 Swift 撰寫 Run Script！
author: ZhgChgLi
date: 2020-09-17T15:53:20.026+0000
last_modified_at: 2021-02-24T01:42:15.691+0000
categories: ZRealm Dev.
tags: [ios,shell-script,xcode,ios-app-development,toolkit]
description: 導入 Localization 多語系及 Image Assets 缺漏檢查、使用 Swift 打造 Run Script 腳本
image:
  path: assets/41c49a75a743/1*RU89TcfRAR5mmclMX9x57w.jpeg
render_with_liquid: false
---

### Xcode 直接使用 Swift 撰寫 Shell Script！

導入 Localization 多語系及 Image Assets 缺漏檢查、使用 Swift 打造 Shell Script 腳本


![Photo by [Glenn Carstens\-Peters](https://unsplash.com/@glenncarstenspeters?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}](/assets/41c49a75a743/1*RU89TcfRAR5mmclMX9x57w.jpeg)

Photo by [Glenn Carstens\-Peters](https://unsplash.com/@glenncarstenspeters?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}
### 緣由

因為自己手殘，時常在編輯多語系檔案時遺漏「;」導致 app build 出來語言顯示出錯再加上隨著開發的推移語系檔案越來越龐大，重複的、已沒用到的語句都夾雜再一起，非常混亂（Image Assets 同樣狀況）。

一直以來都想找工具協助處理這方面的問題，之前是用 [iOSLocalizationEditor](https://github.com/igorkulman/iOSLocalizationEditor){:target="_blank"} 這個 Mac APP，但它比較像是語系檔案編輯器，讀取語系檔案內容＆編輯，沒有自動檢查的功能。
### 期望功能

build 專案時能自動檢查多語系有無錯誤、缺露、重複、Image Assets 有無缺漏。
### 解決方案

要達到我們的期望功能就要在 Build Phases 加入 Run Script 檢查腳本。

但檢查腳本需要使用 shell script 撰寫，因自己對 shell script 的掌握度並不太高，想說站在巨人的肩膀上從網路搜尋現有腳本也找不太到完全符合期望功能的 script，再快要放棄的時候突然想到：


> **Shell Script 可以用 Swift 來寫啊** ！ 




相對 shell script 來說更熟悉、掌握度更高！依照這個方向果然讓我找到兩個現有的工具腳本！

由 [freshOS](https://freshos.github.io/){:target="_blank"} 這個團隊撰寫的兩個檢查工具：
- [**Localize 🏁**](https://github.com/freshOS/Localize){:target="_blank"}
- [**Asset Checker 👮**](https://github.com/s4cha/AssetChecker){:target="_blank"}


完全符合我們的期望功能需求\! \! 並且他們使用 swift 撰寫，要客製化魔改都很容易。
#### [Localize 🏁](https://github.com/freshOS/Localize){:target="_blank"} 多語系檔檢查工具

**功能：**
- build 時自動檢查
- 語系檔自動排版、整理
- 檢查多語系與主要語系之缺漏、多餘
- 檢查多語系重複語句
- 檢查多語系未經翻譯語句
- 檢查多語系未使用的語句


**安裝方法：**
1. [下載工具的 Swift Script 檔案](https://github.com/freshOS/Localize/blob/master/Localize.swift){:target="_blank"}
2. 放到專案目錄下 EX: `${SRCROOT}/Localize.swift`
3. 打開專案設定 → iOS Target → Build Phases →左上角「\+」 → New Run Script Phases → 在 Script 內容貼上路徑 EX: `${SRCROOT}/Localize.swift`



![](/assets/41c49a75a743/1*k2OHjrcQaQIWLqV7G57TgA.png)


4\. 使用 Xcode 打開編輯 `Localize.swift` 檔案進行設定，可以在檔案上半部看到可更動的設定項目：
