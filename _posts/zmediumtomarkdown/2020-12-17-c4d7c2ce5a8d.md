---
title: iOS APP 版本號那些事
author: ZhgChgLi
date: 2020-12-17T14:33:08.230+0000
last_modified_at: 2021-02-24T01:43:06.915+0000
categories: ZRealm Dev.
tags: [ios,ios-app-development,software-engineering,version-control,software-development]
description: 版本號規則及判斷比較解決方案
image:
  path: assets/c4d7c2ce5a8d/1*73CuWIMwmWT1ZsJB8K_q5g.jpeg
render_with_liquid: false
---

### iOS APP 版本號那些事

版本號規則及判斷比較解決方案


![Photo by [James Yarema](https://unsplash.com/@jamesyarema?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}](/assets/c4d7c2ce5a8d/1*73CuWIMwmWT1ZsJB8K_q5g.jpeg)

Photo by [James Yarema](https://unsplash.com/@jamesyarema?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}
### 前言

所有 iOS APP 開發者都會碰到的兩個數字，Version Number 和 Build Number；最近剛好遇到需求跟版本號有關，要做版本號判斷邀請使用者評價 APP，順便挖掘了一下關於版本號的事；文末也會附上我的版本號判斷解決大全。


![[XCode Help](https://help.apple.com/xcode/mac/current/#/devba7f53ad4){:target="_blank"}](/assets/c4d7c2ce5a8d/1*xV13V7U8_SyvK_znwlg1yQ.png)

[XCode Help](https://help.apple.com/xcode/mac/current/#/devba7f53ad4){:target="_blank"}
### 語意化版本 x\.y\.z

首先介紹「 [語意化版本](https://semver.org/lang/zh-TW/){:target="_blank"} 」這份規範，主要是要解決軟體相依及軟體管理上的問題，如我們很常在使用的 Cocoapods ；假設我今天使用 Moya 4\.0，Moya 4\.0 使用並依賴 Alamofire 2\.0\.0，如果今天 Alamofire 有更新了，可能是新功能、可能是修復問題、可能是整個架構重做\(不相容舊版\)；這時候如果對於版本號沒有一個公共共識規範，將會變得一團亂，因為你不知道哪個版本是相容的、可更新的。

**語意化版本由三個部分組成：** `x.y.z`
- x: 主版號 \(major\)：當你做了不相容的 API 修改
- y: 次版號 \(minor\)：當你做了向下相容的功能性新增
- z: 修訂號 \(patch\)：當你做了向下相容的問題修正


**通用規則：**
- 必須為非負的整數
- 不可補零
- 0\.y\.z 開頭為開發初始階段，不應該用於正式版版號
- 以數值遞增


**比較方式：**


> _先比 主版號，主版號 等於時 再比 次版號，次版號 等於時 再比 修訂號。_ 
 

> _ex: 1\.0\.0 < 2\.0\.0 < 2\.1\.0 < 2\.1\.1_ 





另外還可在修訂號之後加入「先行版號資訊 \(ex: 1\.0\.1\-alpha\)」或「版本編譯資訊 \(ex: 1\.0\.0\-alpha\+001\)」但 iOS APP 版號並不允許這兩個格式上傳至 App Store，所以這邊就不做贅述，詳細可參考「 [語意化版本](https://semver.org/lang/zh-TW/){:target="_blank"} 」。

✅：1\.0\.1, 1\.0\.0, 5\.6\.7
❌：01\.5\.6, a1\.2\.3, 2\.005\.6
#### 實際使用

關於實際使用在 iOS APP 版本控制上，因為我們僅作為 Release APP 版本的標記，不存在與其他 APP、軟體相依問題；所以在實際使用上的定義就因應各團隊自行定義，以下僅為個人想法：
- x: 主版號 \(major\)：有重大更新時（多個頁面介面翻新、主打功能上線）
- y: 次版號 \(minor\)：現有功能優化、補強時（大功能下的小功能新增）
- z: 修訂號 \(patch\)：修正目前版本的 bug時


一般如果是緊急修復\(Hot Fix\)才會動到修訂號，正常狀況下都為 0；如果有新的版本上線可以將它歸回 0。


> _EX: 第一版上線\(1\.0\.0\) \-> 補強第一版的功能 \(1\.1\.0\) \-> 發現有問題要修復 \(1\.1\.1\) \-> 再次發現有問題 \(1\.1\.2\) \-> 繼續補強第一版的功能 \(1\.2\.0\) \-> 全新改版 \(2\.0\.0\) \-> 發現有問題要修復 \(2\.0\.1\) … 以此類推_ 




### Version Number vs\. Build Number
#### Version Number \(APP 版本號\)
- App Store、外部識別用
- Property List Key: `CFBundleShortVersionString`
- 內容僅能由數字和「\.」組成
- 官方也是建議使用語意化版本 x\.y\.z 格式
- 2020121701、2\.0、2\.0\.0\.1 都可
\(下面會有總表統計 App Store 上 App 版本號的命名方式\)
- 不可超過 18 個字元
- 格式不合可以 build & run 但無法打包上傳到 App Store
- 僅能往上遞增、不能重複、不能下降



> _一般習慣使用語意化版本 x\.y\.z 或 x\.y。_ 




#### Build Number
- 內部開發過程、階段識別使用，不會公開給使用者
- 打包上傳到 App Store 識別使用（相同 build number 無法重複打包上傳）
- Property List Key: `CFBundleVersion`
- 內容僅能由數字和「\.」組成
- 官方也是建議使用語意化版本 x\.y\.z 格式
- 1、2020121701、2\.0、2\.0\.0\.1 都可
- 不可超過 18 個字元
- 格式不合可以 build & run 但無法打包上傳到 App Store
- 同個 APP 版本號下不能重複，反之不同APP 版本號可以重複
ex: 1\.0\.0 build: 1\.0\.0, 1\.1\.0 build: 1\.0\.0 ✅



> _一般習慣使用日期、number（每個新版本都從 0 開始），並搭配 CI/fastlane 自動在打包時遞增 build number。_ 






![](/assets/c4d7c2ce5a8d/1*JhWpjENUxBxtr1_KCi2cBQ.png)


稍微統計了一下排行版上 app 的版本號格式，如上圖。

一般還是以 x\.y\.z 為主。
### 版本號比較及判斷方式

有時候我們會需要使用版本進行判斷，例如：低於 x\.y\.z 版本則跳強制更新、等於某個版本跳邀請評價，這時候就需要能比較兩個版本字串的功能。
#### 簡易方式
